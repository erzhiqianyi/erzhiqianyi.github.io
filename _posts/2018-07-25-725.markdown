---
layout: post
title: "2018-07-25"
date: 2018-07-23 20:19:11 +0800
categories:  生活
---

2018年7月25日，星期三，晴。

今天竟然没下雨，出门前看了下天气预报，下雨概率比较大，出门没代板，没想到路面倒是很干燥。也好，没带板，慢慢走也不错！

7点40出门，50多到地铁站，人已经比较多。在地铁站外排队就排了10多分钟。进去之后倒是没有排多久。以前没有在上面限流的时候，这个点赶到地铁站基本上排到了第一个电梯口。人挤人，地铁站里异常闷热。入口又只有两个，效率其实比较低，现在限流后，感觉效率大大提升了,秩序也比以前好，里面等车的人也比较少，之前在里面等车的人很多，排在地铁门口的人几乎是被后面的人推进去的。体验过几次后，我决定早点起，早点人少一些。

## 昨日梦
昨天好像做了很多梦，连续不断，场景跳跃性非常强，期间还醒了几次，大概是睡眠不太好。到现在，完全不记得昨天梦见了什么。

## 昨日拾遗
昨天临睡刷了下微信群聊，一个技术群。最后聊的话题是发布，聊天提的东西，以前竟然完全没听过，好慌！

发布，对于任何项目来说都是不可缺少的一环，甚至可以说是最重要的一环之一。可是我对流行的发布技术却没什么了解,比如有人的提到的蓝绿部署，灰度发布，金丝雀发布等。,这不能说是运维的事情，因为现在没有运维，开发既要开发也要发布，甚至还要当客服。

最早做的是安卓开发，第一个版本发布的时候，是个纯本地应用，没有联网，也没有做后台，所以仅仅是发布app。主要就是发到各家应用商店，上传之后就是等通知，通过了就是通过了，没通过找原因，继续上传，最早通过的是360应用商店。速度很快，一天不到。后来其他商店也陆续上线了。没个商店都要重复这些步骤。当时流行的多渠道打包部署也没有用。第一版还算顺利，结果第二版就没这么容易了。第二部版加入了后台，有注册登录服务，还提供数据备份，在上线应用商店之前，已经把服务端部署好了。第二版把签名改了，不能直接覆盖第一版，要先把第一版下线，然后重新上传第二版，但是各大应用商店对下线并不是友好，导致大部分应用商店第二版并没有上传成功。具体原因已经记不得了。

后来做Web开发，初创项目，用户较少。开发一个功能上线一次，全部打包，停掉服务器，上传，重启,就这么简单粗暴。

现在的发布，其实和以前差不多，只不过不是全部打包，而是只打包改过的文件。停掉服务器，然后重启，测试,正式使用。并没有一个过度的过程。也是项目规模的问题，规模不大，使用情况可控，所以采取了这种发布方式，确实比较符合当前项目及人员情况。做个过度，可能会好点，但是目前好像并没有这么多资源。

## 今日阅读
继续《Effectve Java》一天一个点，还是接口的问题，“用接口来定义类型”，不要用接口来做太多事情，用接口来定义类型，表明实现该接口的类型具备这种属性。现在项目中主要用接口来定义操作，比如dao层的接口，执行数据库操作，service层的接口，执行逻辑计算，当然很多情况是负责调用dao层，并没有进行什么逻辑计算，大部分逻辑放在controller层，由controller层来调度service。我觉得这样操作并不好，controller层负责了太多东西。之所以会出现这种情况，我觉得是模块没有设计好，模块没有定义好对外接口，导致各模块的controller层互调用各自的service层方法。

## 今日技术点
grep 。

快下班时，忽然需要查下日志，看下操作的内容。虽然每天都会切割日志，但是切割后的日志没有保留debug级别日志信息，要查的恰好时debug级别，只能去原始日志文件里查。原始日志文件已经达到30多个G，用vim打开基本卡死，所以只能切割下原始文件。

## 今日生活
中午点了外卖，在办公室吃完饭，时间还挺早，天气也算不错，并不是很热。于是乎，去楼下散了会步。有些风，天很蓝，唯一不足的是孤家寡人。