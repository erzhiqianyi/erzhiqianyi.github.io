---
layout: post
title: 2018-08-06
date: 2018-08-06 20:38:11 +0800
categories:  生活
---

2018年8月6日，星期一，晴。

回去一趟，竟然有点累。早上直到出门，都有点迷迷糊糊,上午11点左右，非常困，很想睡觉。

## 百态
星期一，地铁和往常一样人多，还多一点。在外面限了两次，到里面，人还是很多，从剪票口快排到了安检口。平常的无包通道也关闭了。前面的人群缓缓移动，从上面下来的匆匆跑过来，准备走无包通道，竟然有人当关，昂然挺立，目视前方，炯炯有神。双手交叉于后背，如一尊巨石，挡住狭小的通道，周围人声鼎沸，岿然不动。众人见状，急忙停住脚步，往左侧人群移动。一白衣男子快速跑来，忽然弯下身子，从红线下一串而过，直逼前面排队人群。眼看他就要冲入人群中，柱子后面一制服男子拦住了白衣男子去路，缓缓道“请走旁边的安检通道”，白衣男子不理不睬，往人群出移动，无奈被制服男子拦住,左串右串，堵在前面的工作人员也跑过来，，两人前后夹击，将白衣男子夹在中间。眼看白衣男子就要被两人逼出等候区。白衣男子忽然厉声道“我没包包，为什么不让从这边过？”。白衣工作人员缓缓道“现在高峰期，实行限流，就算你从这边进去，也是要等，要是人人都像你这样...” ，话还说完，白衣男子一转身，挤进了人群中。工作人员无奈摇摇头，回到入口处，继续限流。不过一分钟。

## 今日技术
spring mvc 参数校验。

接手这个项目这么久了，项目的一个大问题是参数校验，不是没有参数校验，而是参数校验不优雅，也不完善。不优雅之处在于几乎全部参数校验都是在控制器里写判断，主要是判空，判格式。不完善在于边界条件判断不完善，其实几乎没有什么边界校验，也是因为测试不严格，说好的先写边界条件再写代码了？其实我自己现在写代码也有这个问题，也是先写实现，再来测试，再测试中发现边界条件。这不好。要养成先确定边界情况，再来写实现的习惯。

今天开始在项目中使用spring mvc的参数校验，没怎么用过，不是很熟悉。只是一些基本的用法。感觉之前之所以没怎么用spring mvc的参数校验和项目的整体设计有关系。

项目比较古老，好像后来也没有做太多改变,大概是因为这样,所以一直没有引入新的好用的技术。接口设计并不是很好，接口请求方法没有严格控制，spring 默认是可以使用所有方法的，然而在实际使用中，几乎所有都是get请求，有些甚至只用一个String 来接受所有参数，然后再将这个String转成需要的数据类型，这样的设计，所以好像也用不了spring mvc 的参数校验了。为什么要这样设计，我也不知道。有些接口，则是另外一番风景，78个参数，来接收前端传过来的数据。就像我之前接触过的一个项目，一个接口14个参数，不过还好，是放在url路径里来接接收的。不是url参数。

