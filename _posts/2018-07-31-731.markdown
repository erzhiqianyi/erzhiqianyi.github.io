---
layout: post
title: 2018-07-31
date: 2018-07-31 19:52:11 +0800
categories:  生活
---

2018年7月31日，星期二，晴,游雨。

7月的最后一天。

不知道为什么，昨天10点就很困了。困得有点睁不开眼睛，难道是因为晚上吃粉的时候有点汤水浸入眼睛里？当时留了点泪就没事了。于是躺床上准备睡觉，看了一会书，好像就睡着了，但是11点多又醒了，然后直到2点多才睡着，也可能是因为周末连续两天都睡得比较晚。

早上状态不是很好，在很懵得状态下刷牙洗脸出门。直到地铁站，一路上沐浴着朝阳，才清醒一点。星期二，好像每逢周二人就不会太多（可能是错觉，可能是火鸡得故事）。进站排队上地铁，只有几分钟而已。

今天终于去跑步了！好像是4月份之后第一次跑步。重新开始使用“咕咚”来记录跑步和直指导运动。大概是15年9月开始用咕咚，到16年6月，记录了1000公里，总共111个小时49分钟，应该有一半的记录是滑板产生的。来广州后，跑步较少，后来玩滑板也没有记录，只有16年8月有次去天河公园的记录。满满的回忆，既然以前可以坚持跑这么多，那么现在应该也没问题。

以前跑步都不会做热身运动和跑后拉伸，也不觉得累。不过现在这些App都有跑前热身和跑后拉伸运动了，产品经理还是用心了。好久没跑，其实做完热身运动，就已经有点气喘吁吁了。稍作休息，开始跑步，选择了分段初级燃脂跑，之前也试过，感觉还可以。一共19个阶段。前13个阶段还可以，到了后面，就有点跟不上了。后面几个慢跑都是放松走，只有快跑100米是坚持跑。跑后坐下拉伸运动，和keep提供的动作稍有不同，有几个动作是类似的，做完后确实感觉要轻松一些。一个开始，需要坚持

## 昨日梦
很奇怪的梦，要去参加一个考试，路上又遇到了战争，然后就忘记了。

## 昨日拾遗
昨天说到了分类，早上在去公司的路上想了这个问题，想到了现在项目的一些问题，又会想到了昨天看的一段代码。这段代码说起来也不是很复杂，就是导入一个excel文件，当然要对excel文件进行校验。粗略看了下这段校验的逻辑,这段校验代码竟然达到了1000多行。初一看，好像写得还很规整。每一个判断条件前面都有注释，if else很多，但是也井然有序，if 里面加if，还不少，也挺规矩。但是，这样真的好吗？面条式代码，任何一个有追求的程序员都不应该写出这样的代码。

这样的代码，完全是面向过程的，没有面向对象编程的思想。就是按流水来，这个excel数据本来就多，要对每一个字段进行校验。校验还是在一个for循环里，取出一条数据，一个一个字段校验，好像是先校验是否为空给，再校验是否满足条件，校验成功，保存。校验失败，保存到一个map里，这个map是要返回给用户的。外面一个大的捕获。

一个方法超过50行，我都会检查下这个方法设计是否合理，是否需要优化，能否优化。我的字体比较大，一屏幕只能现时30行代码左右。看那个方法，一直往下滚，有种看不到尽头的绝望感。

系统很多地方需要用到excel导入，我负责的这一部分，也分批次优化了好几次。一个显著的提示是导入速度明显加快了。以前导500条数据都会超时（nginx控制了响应时间为5分钟），现在5000条数据都在1分钟以内完成。

代码做了比较大的改动，几乎将原有代码重写了一遍。先是对数据进行预处理，比如判空，数据格式是否符合要求啊！这一部分预处理，使用注解来确定相应字段的判断规则。这一部分预处理，直接和解析excel放在一起，这样，从excel中解析出来的数据就是完整的数据了。然后再进行其他校验，校验通过后，再保存到数据库中。处理流程分下类，同一类的问题放在用一块处理，再按先后顺序处理，这样流程就不会乱。现实生活中处理事情也是这样,分类，针对问题进行处理，而不是乱搞一通，最后搞得更乱。

## 今日阅读
今天没有阅读，新加入的阅读计划《天朝的崩溃》。

## 杂感

最近的公共事件好像越来越多了，可能是以前媒体不够发达，我也没怎么去关注。热点事件好像一波接一波，此起彼伏，新事件很快就压过了旧事情。有认为这是某些人故意放出各种事件，来引导舆论，转移人们的注意力。也许吧！但我相信人们还是有记忆的。历史不会重演，只会惊人的相似，相似的事件，会是相似的结果吗？也许会，也许不会。历史总是会前进的，不是吗？








